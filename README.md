# Smart Capsule Dispenser (æ™ºèƒ½èƒ¶å›Šåˆ†é…å™¨)

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Raspberry Pi 5** æ„å»ºçš„æ™ºèƒ½èƒ¶å›Šåˆ†é…ç³»ç»ŸåŸå‹ã€‚å®ƒåˆ©ç”¨ç”Ÿç‰©è¯†åˆ«æŠ€æœ¯ï¼ˆæŒ‡çº¹ï¼‰æ¥éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œå¹¶é€šè¿‡é«˜ç²¾åº¦ç¡¬ä»¶ PWM æ§åˆ¶èˆµæœºè¿›è¡Œèƒ¶å›Šåˆ†å‘ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

*   **ğŸ‘† æŒ‡çº¹è¯†åˆ«**: é›†æˆ DY-50 (ç±» R307) å…‰å­¦æŒ‡çº¹æ¨¡å—ï¼Œæ”¯æŒæŒ‡çº¹å½•å…¥ã€æœç´¢å’ŒéªŒè¯ã€‚
*   **âš™ï¸ èˆµæœºæ§åˆ¶**: é‡‡ç”¨ Linux å†…æ ¸çº§ **ç¡¬ä»¶ PWM** (Hardware PWM) é©±åŠ¨ SG90 èˆµæœºï¼Œå½»åº•è§£å†³äº†è½¯ä»¶ PWM çš„æŠ–åŠ¨é—®é¢˜ã€‚
*   **ğŸ—„ï¸ æœ¬åœ°æ•°æ®åº“**: å†…ç½® SQLite æ•°æ®åº“ (`capsule_dispenser.db`)ï¼Œç”¨äºç®¡ç†ç”¨æˆ·ä¿¡æ¯ã€æƒé™å’Œå­˜å‚¨è¯¦ç»†çš„è®¿é—®æ—¥å¿—ã€‚
*   **ğŸ›¡ï¸ ç¨³å®šå¯é **: åŒ…å«è‡ªåŠ¨é˜²æŠ–é€»è¾‘ï¼ˆåŠ¨ä½œååˆ‡æ–­ä¿¡å·ï¼‰å’Œä¸²å£é€šä¿¡é”™è¯¯å¤„ç†ã€‚

## ğŸ› ï¸ ç¡¬ä»¶æ¸…å•

1.  **ä¸»æ§**: Raspberry Pi 5 (è¿è¡Œ Raspberry Pi OS Bookworm)
2.  **æ‰§è¡Œå™¨**: SG90 Micro Servo (9g èˆµæœº)
3.  **ä¼ æ„Ÿå™¨**: DY-50 / R307 æŒ‡çº¹æ¨¡å— (UART æ¥å£)
4.  **ç”µæº**: 5V/5A (Pi)

## ğŸ”Œ æ¥çº¿ç®€è¿°

> âš ï¸ **æ³¨æ„**: è¯¦ç»†æ¥çº¿å›¾è¯·åŠ¡å¿…å‚è€ƒ [WIRING_GUIDE.md](WIRING_GUIDE.md)ã€‚

*   **èˆµæœºä¿¡å·çº¿**: GPIO 18 (Pin 12) -> å¯¹åº” `/sys/class/pwm/pwmchip0/pwm2`
*   **æŒ‡çº¹æ¨¡å—**:
    *   TX (æ¨¡å—) -> GPIO 15 (RXD)
    *   RX (æ¨¡å—) -> GPIO 14 (TXD)
    *   **å…³é”®**: åœ¨ Pi 5 ä¸Šä½¿ç”¨ `/dev/ttyAMA0` ç«¯å£ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å®‰è£…å¿…è¦çš„ Python åº“
sudo apt-get update
sudo apt-get install python3-serial python3-pip
sudo pip3 install adafruit-circuitpython-fingerprint rpi-lgpio
```

### 2. ç³»ç»Ÿé…ç½®
ç¼–è¾‘ `/boot/firmware/config.txt` å¯ç”¨ç¡¬ä»¶ PWMï¼š
```text
dtoverlay=pwm,pin=18,func=2
```
é‡å¯æ ‘è“æ´¾ç”Ÿæ•ˆã€‚

### 3. è¿è¡Œä»£ç 

**åˆå§‹åŒ–æ•°æ®åº“:**
```bash
python3 setup_database.py
```

**å½•å…¥æŒ‡çº¹ (æ³¨å†Œç”¨æˆ·):**
```bash
sudo python3 fingerprint_enroll.py
```

**è¿è¡Œä¸»æ¼”ç¤ºç¨‹åº:**
```bash
sudo python3 main_demo.py
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

*   `main_demo.py`: æ ¸å¿ƒä¸»ç¨‹åºï¼Œé›†æˆæŒ‡çº¹éªŒè¯ä¸èˆµæœºæ§åˆ¶ã€‚
*   `servo_control.py`: å°è£…å¥½çš„èˆµæœºæ§åˆ¶ç±»ï¼Œå¤„ç†åº•å±‚ PWM æ“ä½œã€‚
*   `fingerprint_enroll.py`: ç‹¬ç«‹çš„æŒ‡çº¹å½•å…¥å·¥å…·ã€‚
*   `setup_database.py`: æ•°æ®åº“å»ºè¡¨è„šæœ¬ã€‚
*   `PROJECT_STATUS_S5.md`: è¯¦ç»†çš„é¡¹ç›®å¼€å‘çŠ¶æ€å’ŒæŠ€æœ¯å†³ç­–æ–‡æ¡£ã€‚

## ğŸ“ è®¸å¯è¯
MIT License
